{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OPENAI_API_KEY=process.env.REACT_APP_OPENAI_API_KEY;const Feedback=_ref=>{let{userExplanation,problem,complexity}=_ref;const[feedback,setFeedback]=useState(null);const[loading,setLoading]=useState(false);const[score,setScore]=useState(null);useEffect(()=>{const getFeedback=async()=>{if(!userExplanation||!problem.code)return;setLoading(true);try{console.log(\"üì¢ Sending user explanation for feedback...\");const response=await axios.post(\"https://api.openai.com/v1/chat/completions\",{model:\"gpt-4o\",messages:[{role:\"system\",content:\"You are an AI reviewer. Analyze the user's explanation and compare it to the provided code. Give a score from 1-10 based on how well they understood the code and provide concise feedback.\"},{role:\"user\",content:\"Here is the code:\\n                                \\n\\n\".concat(problem.code,\"\\n                                \\n\\nHere is the user's explanation:\\n                                \\n\\n\\\"\").concat(userExplanation,\"\\\"\\n                                \\n\\n the using beleives the time complexity is \").concat(complexity,\"\\n                                \\n\\nEvaluate their understanding, provide a score (0-10) first as \\\"Your score is X/10.\\\" followed by a newline and then a detailed paragraph response.\")}],temperature:0.5,max_tokens:200},{headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(OPENAI_API_KEY)}});console.log(\"‚úÖ AI Feedback Response:\",response.data);const aiResponse=response.data.choices[0].message.content.trim();// Extract score from AI response\nconst scoreMatch=aiResponse.match(/Your score is (\\d+)\\/10/);if(scoreMatch){setScore(scoreMatch[1]);// Extract score value\nsetFeedback(aiResponse.replace(scoreMatch[0],\"\").trim());// Remove score from response\n}else{setFeedback(aiResponse);}}catch(error){console.error(\"‚ùå Error fetching AI feedback:\",error);setFeedback(\"‚ö†Ô∏è AI could not generate feedback.\");}finally{setLoading(false);}};getFeedback();},[userExplanation,problem,complexity]);return/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 w-full max-w-2xl bg-white p-6 rounded-lg shadow-lg border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 flex items-center mb-4\",children:\"\\uD83E\\uDD16 AI Feedback & Score\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col items-center bg-gray-100 p-4 rounded-lg mb-3\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-2xl font-bold text-blue-600\",children:[\"\\uD83D\\uDCCA Score: \",score?\"\".concat(score,\"/10\"):\"Analyzing...\"]})}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 italic\",children:\"Analyzing your explanation...\"}):/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 bg-gray-50 p-4 rounded-lg border border-gray-300\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700\",children:feedback||\"No feedback yet.\"})})]});};export default Feedback;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","OPENAI_API_KEY","process","env","REACT_APP_OPENAI_API_KEY","Feedback","_ref","userExplanation","problem","complexity","feedback","setFeedback","loading","setLoading","score","setScore","getFeedback","code","console","log","response","post","model","messages","role","content","concat","temperature","max_tokens","headers","Authorization","data","aiResponse","choices","message","trim","scoreMatch","match","replace","error","className","children"],"sources":["/Users/mikebatush/Downloads/readcodeai (5)/src/components/Feedback.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nconst OPENAI_API_KEY = process.env.REACT_APP_OPENAI_API_KEY;\n\nconst Feedback = ({ userExplanation, problem, complexity }) => {\n  const [feedback, setFeedback] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [score, setScore] = useState(null);\n\n  useEffect(() => {\n    const getFeedback = async () => {\n      if (!userExplanation || !problem.code) return;\n\n      setLoading(true);\n      try {\n        console.log(\"üì¢ Sending user explanation for feedback...\");\n\n        const response = await axios.post(\n          \"https://api.openai.com/v1/chat/completions\",\n          {\n            model: \"gpt-4o\",\n            messages: [\n              {\n                role: \"system\",\n                content:\n                  \"You are an AI reviewer. Analyze the user's explanation and compare it to the provided code. Give a score from 1-10 based on how well they understood the code and provide concise feedback.\",\n              },\n              {\n                role: \"user\",\n                content: `Here is the code:\n                                \\n\\n${problem.code}\n                                \\n\\nHere is the user's explanation:\n                                \\n\\n\"${userExplanation}\"\n                                \\n\\n the using beleives the time complexity is ${complexity}\n                                \\n\\nEvaluate their understanding, provide a score (0-10) first as \"Your score is X/10.\" followed by a newline and then a detailed paragraph response.`,\n              },\n            ],\n            temperature: 0.5,\n            max_tokens: 200,\n          },\n          {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${OPENAI_API_KEY}`,\n            },\n          }\n        );\n\n        console.log(\"‚úÖ AI Feedback Response:\", response.data);\n        const aiResponse = response.data.choices[0].message.content.trim();\n\n        // Extract score from AI response\n        const scoreMatch = aiResponse.match(/Your score is (\\d+)\\/10/);\n        if (scoreMatch) {\n          setScore(scoreMatch[1]); // Extract score value\n          setFeedback(aiResponse.replace(scoreMatch[0], \"\").trim()); // Remove score from response\n        } else {\n          setFeedback(aiResponse);\n        }\n      } catch (error) {\n        console.error(\"‚ùå Error fetching AI feedback:\", error);\n        setFeedback(\"‚ö†Ô∏è AI could not generate feedback.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    getFeedback();\n  }, [userExplanation, problem, complexity]);\n\n  return (\n    <div className=\"mt-6 w-full max-w-2xl bg-white p-6 rounded-lg shadow-lg border border-gray-200\">\n      {/* üîπ Header */}\n      <h3 className=\"text-lg font-semibold text-gray-800 flex items-center mb-4\">\n        ü§ñ AI Feedback & Score\n      </h3>\n\n      {/* üèÜ Score & Time Complexity Row */}\n      <div className=\"flex flex-col items-center bg-gray-100 p-4 rounded-lg mb-3\">\n        <span className=\"text-2xl font-bold text-blue-600\">\n          üìä Score: {score ? `${score}/10` : \"Analyzing...\"}\n        </span>\n      </div>\n\n      {/* üìÑ Feedback Section */}\n      {loading ? (\n        <p className=\"text-gray-600 italic\">Analyzing your explanation...</p>\n      ) : (\n        <div className=\"mt-2 bg-gray-50 p-4 rounded-lg border border-gray-300\">\n          <p className=\"text-gray-700\">{feedback || \"No feedback yet.\"}</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Feedback;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}